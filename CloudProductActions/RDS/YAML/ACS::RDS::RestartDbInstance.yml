FormatVersion: OOS-2019-06-01
Description:
  name-en: ACS::RDS::RestartDbInstance
  name-zh-cn: 重启RDS实例
  en: Restarts an RDS instance
  zh-cn: 重启一台RDS实例
Parameters:
  regionId:
    Description:
      en: The ID of region
      zh-cn: 地域ID
    Type: String
    Default: '{{ ACS::RegionId }}'
  dBInstanceId:
    Description:
      en: The ID of DB Instance that will be restarted
      zh-cn: 将要重启的DB实例的ID
    Type: String
Tasks:
- Name: restartDBInstance
  Action: ACS::ExecuteAPI
  Description:
    en: Restarts an RDS instance
    zh-cn: 重新启动RDS实例
  Properties:
    Service: RDS
    API: RestartDBInstance
    Parameters:
      RegionId: '{{ regionId }}'
      DBInstanceId: '{{ dBInstanceId }}'
- Name: untilInstanceReady
  Action: ACS::WaitFor
  Description:
    en: Waits for the DB Instance to enter running status
    zh-cn: 等待DB实例进入running状态
  Properties:
    Service: RDS
    API: DescribeDBInstances
    Parameters:
      RegionId: '{{ regionId }}'
      DBInstanceId: '{{ dBInstanceId }}'
    DesiredValues:
    - Running
    PropertySelector: Items.DBInstance[].DBInstanceStatus
